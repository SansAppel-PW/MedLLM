# Stage 3.2 模块报告：真实SFT与代理对齐流程分层

## 1. 阶段启动风险评估（执行前）
- 技术风险：现有 `run_real_alignment_pipeline.sh` 会给出“real”语义输出，但核心对齐仍是模拟脚本，存在口径误解风险。
  - 缓解：引入 `ALIGNMENT_MODE`，将真实与代理模式显式分离。
- 计算资源风险：真实 DPO/SimPO/KTO 尚未落地，短期无法一次性打通全真实流水线。
  - 缓解：先锁定“真实 SFT + 代理对齐”中间态，避免错误承诺。
- 论文逻辑风险：若不区分模式，实验结论可能被误写为真实对齐结果。
  - 缓解：pipeline 在 `proxy` 模式输出明确警告；`real` 模式未实现时直接失败退出。
- 数据质量风险：偏好对构造仍依赖真实数据文件存在性。
  - 缓解：保持显式输入路径并沿用现有硬负样本构建步骤。
- 时间成本风险：在未实现真实偏好训练器前，继续扩写文档价值有限。
  - 缓解：先重构流程边界，为后续真实 DPO/SimPO 快速替换预留接口。

## 2. 本模块改动
- `scripts/train/run_real_alignment_pipeline.sh`
  - Step1 改为调用真实 SFT 入口：`scripts/train/run_layer_b_real_sft.sh`
  - Step2 保留偏好对构建
  - Step3 新增 `ALIGNMENT_MODE` 分流：
    - `proxy`：运行现有代理 DPO/SimPO/KTO，并提示警告
    - `real`：显式报未实现并退出
- `README.md`
  - 更新训练对齐流水线输出与模式说明，避免口径混淆

## 3. 本模块论文影响评估
1. 所属章节：`第5章训练流程实现细节`。
2. 是否能形成完整实验小节：能（“流程分层与实验口径控制”）。
3. 是否增强论文创新性：低到中（偏工程治理，不是算法创新）。
4. 是否增强论文严谨性：高（显著降低代理/真实结果混淆风险）。

结论：必须保留，作为真实偏好训练接入前的安全闸门。
